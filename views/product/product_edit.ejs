<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/styles.css" type="text/css"/>
    <script defer src="/script/script.js"></script>
    <title><%= title %></title>
</head>  
    <body>
        <%- include("../partials/header") %>
        <main>
            <%- include("../partials/validationErrors") %>
            <div class="form-container">
                <form action="/products/edit/<%= product.id %>" method="POST" id="productForm" class="form">
                    <h1 class="title"><%= title %></h1> 
                    <div class="form-group">
                        <label for="name">
                            Name <span>*</span>
                        </label>
                        <input 
                            type="text" 
                            id="name" 
                            name="name"
                            value="<%= product.name %>"                     
                            required
                        >
                    </div>
                    <div>
                        <div class="form-group">
                            <label for="sku">
                                SKU
                            </label>
                            <input 
                                type="text" 
                                id="sku" 
                                name="sku"
                                value="<%= product.sku %>"
                            >
                        </div>
                        <div class="form-group">
                            <label for="price">
                                Price
                            </label>
                            <input 
                                type="number" 
                                id="price" 
                                name="price"
                                value="<%= product.price %>"
                                step="0.01"
                                min="0"                                                  
                            >
                        </div>
                        <div class="form-group">
                            <label for="quantity">
                                Quantity
                            </label>
                            <input 
                                type="number" 
                                id="quantity" 
                                name="quantity"
                                value="<%= product.quantity %>"                                                  
                            >
                        </div> 
                    </div>
                    <div>                       
                        <div class="form-group">
                            <label>
                                Brand
                            </label>
                            <select name="brand_id">
                                <% brands.forEach((brand) => { %>
                                    <option 
                                        value="<%= brand.id %>"
                                        <%= String(brand.id) === String(product.brand_id) ? "selected" : "" %>
                                    >
                                        <%= brand.name %>
                                    </option>
                                <% }) %>                                
                            </select>
                        </div>       
                        <div class="form-group">
                            <label>
                                Category
                            </label>
                            <select name="category_id">
                                <% categories.forEach((category) => { %>
                                    <option 
                                        value="<%= category.id %>"
                                        <%= String(category.id) === String(product.category_id) ? "selected" : "" %>
                                    >
                                        <%= category.name %>
                                    </option>
                                <% }) %>                                
                            </select>
                        </div>
                    </div> 
                    <div class="form-group">
                        <label for="description">
                            Description
                        </label>
                        <textarea                          
                            name="description"                            
                            rows="5"                     
                        ><%= product.description %></textarea>
                    </div>              
                </form>
                <div class="buttons-container">
                    <form action="/products/<%= product.id %>" method="GET">
                        <button type="submit">CANCEL</button>        
                    </form>                    
                    <button type="submit" form="productForm">UPDATE</button>                   
                </div>
            </div>             
        </main>
        <%- include("../partials/footer") %>   
    </body>
</html>