<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/styles.css" type="text/css"/>
    <script defer src="/script/script.js"></script>
    <title><%= title %></title>
</head>  
    <body>
        <%- include("../partials/header") %>
        <main>
            <%- include("../partials/validationErrors") %>
            <div class="form-container">           
                <form action="/products/new" method="POST" id="newProductForm" class="form">
                    <h1><%= title %></h1> 
                    <div class="form-group">
                        <label for="name">
                            Name <span>*</span>
                        </label>
                        <input 
                            type="text" 
                            id="name" 
                            name="name"
                            value="<%= product.name || "" %>"                      
                            required
                        >
                    </div>
                    <div>
                        <div class="form-group">
                            <label for="sku">
                                SKU 
                            </label>
                            <input 
                                type="text" 
                                id="sku" 
                                name="sku"
                                value="<%= product.sku || "" %>"                               
                            >
                        </div>
                        <div class="form-group">
                            <label for="price">
                                Price
                            </label>
                            <input 
                                type="number" 
                                id="price"
                                step="0.01"
                                min="0" 
                                name="price"
                                value="<%= product.price || 0.00 %>"                                                     
                            >
                        </div>
                        <div class="form-group">
                            <label for="quantity">
                                Quantity
                            </label>
                            <input 
                                type="number" 
                                id="quantity" 
                                name="quantity"
                                min="0"
                                value="<%= product.quantity || 0 %>"                    
                            >
                        </div> 
                    </div>
                    <div>
                        <div class="form-group">
                            <label>
                                Brand
                            </label>
                            <select name="brand_id">
                                <% brands.forEach((brand) => { %>
                                    <option value="<%= brand.id %>">
                                        <%= brand.name %>
                                    </option>
                                <% }) %>                                
                            </select>
                        </div>                       
                        <div class="form-group">
                            <label>
                                Category
                            </label>
                            <select name="category_id">
                                <% categories.forEach((category) => { %>
                                    <option value="<%= category.id %>" 
                                        <%= String(product.category_id) === String(category.id) ? "selected" : "" %>    
                                    >
                                        <%= category.name %>
                                    </option>
                                <% }) %>                                
                            </select>
                        </div>
                    </div> 
                    <div class="form-group">
                        <label for="description">
                            Description
                        </label>
                        <textarea                          
                            name="description"
                            rows="4"                     
                        ><%= product.description || "" %></textarea>
                    </div>
                    <input type="hidden" name="image_src" value="../images/default-image.png"/>              
                </form>
                <div class="buttons-container">
                    <form action="/products" method="GET">
                        <button type="submit">CANCEL</button>        
                    </form>                    
                    <button type="submit" form="newProductForm">ADD PRODUCT</button>                   
                </div>
            </div>             
        </main>
        <%- include("../partials/footer") %>   
    </body>
</html>